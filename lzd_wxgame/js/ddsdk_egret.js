var egret = window.egret;!function(){var d=window.egret,l=(this&&this.__reflect,this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i}),p=new d.Rectangle(30,30,30,30),c="mask",u="cty_icon_03",g="cty_button_02",D=20,f=20,w=100+D,y=120+f,T={};function x(e,t){RES.getResByUrl(t,function(t){e instanceof d.Bitmap?e.texture=t:e.source=t},this,RES.ResourceItem.TYPE_IMAGE)}function v(t,e){var i=0,n=null,s=null,a=function(){2==++i&&e(s,n)},o=t.lastIndexOf("."),h=t.substring(0,o)+".png";RES.getResByUrl(h,function(t){n=t,a()},this,RES.ResourceItem.TYPE_IMAGE),RES.getResByUrl(t,function(t){s=t,a()},this,RES.ResourceItem.TYPE_JSON)}!function(t){var e=function(e){function t(){var t=e.call(this)||this;return t.m_img=new d.Bitmap,t.m_icon=new d.Bitmap,t.m_Gift=new d.Bitmap,t.addChild(t.m_img),t.addChild(t.m_icon),t.addChild(t.m_Gift),t.m_img.touchEnabled=!0,t.addEventListener(d.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.m_img.addEventListener(d.TouchEvent.TOUCH_TAP,t.onTouch,t),t}return l(t,e),t.prototype.onTouch=function(t){DDSDK_Render.m_TryDlg&&DDSDK_Render.m_TryDlg.popup()},t.prototype.init=function(){this.m_bstate=!1,this.m_img.texture=T.getRes("cty_button_01"),this.m_icon.texture=T.getRes("cqy2"),this.m_Gift.texture=T.getRes("cty_icon_02"),this.m_icon.x=3,this.m_icon.y=13,this.m_Gift.x=50,this.m_Gift.y=-20},t.prototype.onAddToStage=function(t){this.init()},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.size=function(t,e){this.width=t,this.height=e},t}(d.Sprite);t.CTryBtn=e;var n=function(i){function t(t){var e=i.call(this)||this;return e.m_FavCont=new d.Sprite,e.m_Img=new d.Bitmap,e.m_Img.texture=T.getRes("cty_frame_06"),e.m_Img.scale9Grid=new d.Rectangle(60,20,60,20),e.m_Img.width=530,e.m_Img.height=198,e.m_Text=new d.Bitmap,e.m_Text.texture=T.getRes("cty_font_02"),e.m_Text.x=18,e.m_Text.y=24,e.m_MBtn=new d.Bitmap,e.m_MBtn.texture=T.getRes("cty_button_05"),e.m_MBtn.x=328,e.m_MBtn.y=160,e.m_RBtn=new d.Bitmap,e.m_RBtn.texture=T.getRes("cty_button_04"),e.m_RBtn.x=472,e.m_RBtn.y=26,e.m_ListView=new r("favList"),e.m_ListView.setViewGrid(4,1),e.m_ListView.setTextStyle("苹方",22,!0,"#7c0670"),e.m_ListView.x=60,e.m_ListView.y=18,e.m_ListView.scaleX=.8,e.m_ListView.scaleY=.8,e.m_FavCont.addChild(e.m_Img),e.m_FavCont.addChild(e.m_Text),e.m_FavCont.addChild(e.m_MBtn),e.m_FavCont.addChild(e.m_RBtn),e.m_FavCont.addChild(e.m_ListView),e.addChild(e.m_FavCont),e.touchEnabled=!0,e.m_RBtn.touchEnabled=!0,e.m_MBtn.touchEnabled=!0,e.addEventListener(d.TouchEvent.TOUCH_TAP,e.onTap,e),e.m_RBtn.addEventListener(d.TouchEvent.TOUCH_TAP,e.onRefreGame,e),e.m_MBtn.addEventListener(d.TouchEvent.TOUCH_TAP,e.onMoreGame,e),e.refreshList(),e}return l(t,i),t.prototype.refreshList=function(){this.m_ListView.nextData(),d.setTimeout(this.refreshList,this,DDSDK_Render.getData("FavRefreshTime"))},t.prototype.onTap=function(t){if(t.target&&t.target.m_Data){var e=t.target.m_Data;DDSDK.logTag("sdk-trydlg-favor",e.appid,e.path)}},t.prototype.onMoreGame=function(t){var e=DDSDK_Render.getData("moreGame");DDSDK.openADApp(e)},t.prototype.refresh=function(){this.m_ListView.refresh()},t.prototype.onRefreGame=function(t){t.stopPropagation(),this.m_ListView.nextData()},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.size=function(t,e){this.width=t,this.height=e},t}(d.Sprite);t.CFavPanel=n;var a=function(i){function t(){var t,e=i.call(this)||this;return e.m_ListCont=new d.Sprite,e.m_LImg=new d.Bitmap,(t=e.m_LImg).texture=T.getRes("cty_frame_03"),t.scale9Grid=new d.Rectangle(27,27,27,27),t.width=520,t.height=120,e.m_LMask=new d.Bitmap,(t=e.m_LMask).texture=T.getRes(c),t.width=94,t.height=94,t.x=12,t.y=10,e.m_LIcon=new d.Bitmap,(t=e.m_LIcon).texture=T.getRes("cty_frame_04"),t.scale9Grid=new d.Rectangle(17,17,17,17),t.width=94,t.height=94,t.x=12,t.y=10,t.mask=e.m_LMask,e.m_LMoney=new d.Bitmap,(t=e.m_LMoney).texture=T.getRes("cty_frame_05"),t.scale9Grid=new d.Rectangle(16,11,16,11),t.x=e.m_LIcon.x+e.m_LIcon.width+16,t.y=60,t.width=139,t.height=34,e.m_LMD=new d.Bitmap,(t=e.m_LMD).texture=T.getRes("cty_icon_04"),t.x=e.m_LMoney.x+3,t.y=e.m_LMoney.y+3,t.width=31,t.height=27,e.m_LName=new d.TextField,(t=e.m_LName).text="猜你喜欢",t.textColor=8128112,t.size=24,t.bold=!0,t.x=e.m_LIcon.x+e.m_LIcon.width+17,t.y=22,t.width=240,e.m_LMN=new d.TextField,(t=e.m_LMN).text="20",t.textColor=16777215,t.size=18,t.x=e.m_LMoney.x+70,t.y=e.m_LMoney.y+10,e.m_LBTN=new d.Bitmap,(t=e.m_LBTN).texture=T.getRes(g),t.x=e.m_LImg.width-t.width-16,t.y=30,(t=e.m_ListCont).addChild(e.m_LImg),t.addChild(e.m_LIcon),t.addChild(e.m_LMask),t.addChild(e.m_LMoney),t.addChild(e.m_LBTN),t.addChild(e.m_LMD),t.addChild(e.m_LName),t.addChild(e.m_LMN),e.addEventListener(d.Event.ADDED_TO_STAGE,e.onAddToStage,e),e.m_LBTN.addEventListener(d.TouchEvent.TOUCH_TAP,e.onTapBtn,e),e.addChild(t),e.size(e.m_LImg.width,e.m_LImg.height),e.m_LBTN.touchEnabled=!0,e}return l(t,i),t.prototype.onTapBtn=function(t){this.processData()},t.prototype.init=function(){},t.prototype.canGetReward=function(){return!(this.m_Data.everyday&&this.m_Data.reward&&0<this.m_Data.reward.datecount)&&!(this.m_Data.onlyonce&&this.m_Data.reward&&0<this.m_Data.reward.allcount)},t.prototype.processData=function(){if(this.m_Data){var h=this;DDSDK.openADApp(this.m_Data,function(){if(h.canGetReward()){DDSDK.logTag("sdk-trydlg-getreward",h.m_Data.appid,h.m_Data.path);var s=DDSDK_Render.getData("try_updatereward");if(s){var a=(new Date).getTime(),o={appid:DDSDK.m_Appid,openid:DDSDK.m_Openid,gameid:h.m_Data.gameid};DDSDK_Render.setRewardCB(function(t){var e=!0,i=!0,n=!1;return h.m_Data.gameid==h.m_Data.appid&&(i=!1,1038!=t.scene&&(e=!1)),e&&(n=DDSDK.checkReward(s,o,h.m_Data.money,h.m_Data.rewardtime,a)),1!=i||0!=n})}}else DDSDK.logTag("sdk-trydlg-ingame",h.m_Data.appid,h.m_Data.path)})}},t.prototype.setData=function(t){var e;this.m_Data=t,this.m_LName.text=t.name,this.m_LMN.text=t.money,t.mskin&&x(this.m_LMD,t.mskin),x(this.m_LIcon,t.skin),this.canGetReward()?e=g:(e="miaobt",this.m_LName.text+=DDSDK_Render.getData("try_rewardext")),this.m_LBTN.texture=T.getRes(e)},t.prototype.onAddToStage=function(t){this.init()},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.size=function(t,e){this.width=t,this.height=e},t}(d.Sprite);t.CListItem=a;var s=function(s){function t(){var t=s.call(this)||this;t.m_List=[],t.m_ListCon=new d.Sprite,t.m_ScrollView=new d.ScrollView;var e=DDSDK_Render.getData("appList");if(e&&e.length)for(var i=0;i<e.length;i++){var n=new a;n.y=14+i*n.height,t.m_List.push(n),t.m_ListCon.addChild(n),e[i]}return t.m_RewardsInfo=null,t.getRewardsList(),t.m_ScrollView.addEventListener(d.TouchEvent.TOUCH_TAP,t.OnTap,t),t.addEventListener(d.Event.ADDED_TO_STAGE,this.onAddToStage,this),t}return l(t,s),t.prototype.getRewardsList=function(){var t=DDSDK_Render.getData("try_getrewards");if(t){var e=this,i={appid:DDSDK.m_Appid,openid:DDSDK.m_Openid};DDSDK.ajax(t,i,function(t){e.m_RewardsInfo=t,e.getAppList()},function(t){e.getRewardsList()})}},t.prototype.getAppList=function(){var t=DDSDK_Render.getData("appList");if(this.m_RewardsInfo&&t&&0<t.length){if(0<this.m_RewardsInfo.length){var e=this.m_RewardsInfo;if(e&&0<e.length)for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)e[i].gameid&&e[i].gameid==t[n].gameid&&(t[n].reward=e[i])}this.m_Data=t,this.sortAppList()}},t.prototype.sortAppList=function(){if(this.m_Data){for(var t=[],e=[],i=0;i<this.m_Data.length;i++)(n=this.m_Data[i]).reward?n.reward.everyday?0<n.reward.datecount&&t.push(n):n.reward.onlyonce?0<n.reward.allcount&&t.push(n):t.push(n):e.push(n);this.m_Data=e.concat(t);for(i=0;i<this.m_Data.length;i++){var n;(n=this.m_List[i]).setData(this.m_Data[i])}}},t.prototype.init=function(){var t=DDSDK_Render.getData("appList");if(this.m_RewardsInfo&&t&&0<t.length){if(0<this.m_RewardsInfo.length){var e=this.m_RewardsInfo;if(e&&0<e.length)for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)e[i].gameid&&e[i].gameid==t[n].gameid&&(t[n].reward=e[i])}this.m_Data=t,this.sortAppList()}},t.prototype.refresh=function(){this.getRewardsList()},t.prototype.init=function(){this.m_ScrollView.setContent(this.m_ListCon);this.m_ScrollView.width=520,this.m_ScrollView.height=525,this.m_ScrollView.x=260,this.m_ScrollView.y=262.5,this.m_ScrollView.anchorOffsetX=260,this.m_ScrollView.anchorOffsetY=262.5,this.addChild(this.m_ScrollView)},t.prototype.OnTap=function(t){t.stopPropagation()},t.prototype.onAddToStage=function(t){this.init()},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.size=function(t,e){this.m_ListCon.width=t,this.m_ListCon.height=e},t}(d.Sprite);t.CListPanel=s;var o=function(i){function t(){var t=i.call(this)||this;t.m_Data=DDSDK_Render.getData("try_tip"),t.m_Text=new d.TextField,t.m_TextBK=new d.Bitmap,t.m_TextBK.texture=T.getRes("cty_frame_08"),t.m_TextBK.scale9Grid=new d.Rectangle(20,17,20,17);var e=DDSDK_Render.getData("try_rewardtip").length*t.m_Text.size;return t.m_TextBK.width=e,t.m_TextBK.height=50,t.size(e,50),t.addChild(t.m_TextBK),t.addChild(t.m_Text),this.visible=!1,t.addEventListener(d.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return l(t,i),t.prototype.onTouch=function(t){},t.prototype.init=function(){},t.prototype.onAddToStage=function(t){},t.prototype.fixpos=function(t,e){var i,n;i=(this.m_TextBK.width-this.m_Text.width)/2,n=(this.m_TextBK.height-this.m_Text.height)/2,this.m_Text.x=i,this.m_Text.y=n},t.prototype.tween=function(){d.Tween.get(this).to({y:this.m_YPos+this.m_Data.offsety,alpha:.4},this.m_Data.mtime).call(this.tweenEnd,this)},t.prototype.tweenEnd=function(){this.visible=!1,this.y=this.m_YPos},t.prototype.showTip=function(t){this.m_Text.text=t,this.visible=!0,this.alpha=1,this.fixpos(),d.setTimeout(this.tween,this,this.m_Data.stime)},t.prototype.pos=function(t,e){this.m_YPos=e+this.m_Data.y,this.x=t,this.y=this.m_YPos},t.prototype.size=function(t,e){this.width=t,this.height=e},t}(d.Sprite);t.CTipsDlg=o;var i=function(i){function t(){var t=i.call(this)||this;t.m_CloseCB=null,t.visible=!1,t.once(d.Event.ADDED_TO_STAGE,t.addToStage,t),t.addEventListener(d.TouchEvent.TOUCH_TAP,t.onTap,t),t.m_Cont=new d.Sprite,t.m_BKImg=new d.Bitmap,t.m_BKFrame=new d.Bitmap,t.m_closeBtn=new d.Bitmap,t.m_TryFirst=new d.Bitmap,t.m_Text=new d.TextField,t.m_BKFrame.touchEnabled=!0,t.m_BKImg.touchEnabled=!0,t.m_TryFirst.touchEnabled=!0,t.m_closeBtn.touchEnabled=!0,t.m_TextCont=new d.Sprite,t.m_TextBK=new d.Bitmap,t.m_TextBK.texture=T.getRes("cty_frame_08"),t.m_TextBK.scale9Grid=new d.Rectangle(20,17,20,17),t.m_TextBK.width=228,t.m_TextBK.height=50,t.m_TextCont.addChild(t.m_TextBK),t.m_TextCont.addChild(t.m_Text);var e=t.m_BKImg;return e.texture=T.getRes("cty_frame_01"),e.scale9Grid=new d.Rectangle(28,27,28,27),e.width=549,e.height=850,(e=t.m_BKFrame).texture=T.getRes("cty_frame_02"),e.scale9Grid=p,e.width=526,e.height=541,e.x=(t.m_BKImg.width-t.m_BKFrame.width)/2,e.y=90,t.m_TryFirst.texture=T.getRes("cty_font_01"),t.m_TryFirst.x=(t.m_BKImg.width-t.m_TryFirst.width)/2,t.m_TryFirst.y=30,t.m_closeBtn.texture=T.getRes("cty_button_03"),t.m_closeBtn.x=490,t.m_closeBtn.y=-10,(e=t.m_Text).text="点击空白区域关闭",e.textColor=10461087,e.size=24,e.bold=!0,e.width=216,t.m_ListPanel=new s,t.m_FavPanel=new n,t.m_TipDlg=new o,t.m_Cont.addChild(t.m_BKImg),t.m_Cont.addChild(t.m_closeBtn),t.m_Cont.addChild(t.m_TryFirst),t.m_Cont.addChild(t.m_BKFrame),t.addChild(t.m_Cont),t.m_Cont.addChild(t.m_ListPanel),t.m_Cont.addChild(t.m_FavPanel),t.m_Cont.addChild(t.m_TipDlg),t.addChild(t.m_TextCont),this.touchEnabled=!0,t}return l(t,i),t.prototype.addToStage=function(){this.init()},t.prototype.init=function(){var t=this.stage.stageWidth,e=this.stage.stageHeight;this.width=t,this.height=e,this.graphics.beginFill(789516,.7),this.graphics.drawRect(0,0,t,e),this.graphics.endFill(),this.m_Cont.x=(t-this.m_BKImg.width)/2,this.m_Cont.y=(e-this.m_BKImg.height)/2,this.m_ListPanel.pos(14,this.m_BKFrame.y+3),this.m_FavPanel.pos(10,this.m_BKFrame.y+this.m_BKFrame.height+8),this.m_TextCont.x=(t-this.m_TextBK.width)/2,this.m_TextCont.y=this.m_Cont.y+this.m_BKImg.height+20,this.m_Text.x=(this.m_TextBK.width-this.m_Text.width)/2+10,this.m_Text.y=(this.m_TextBK.height-this.m_Text.height)/2;var i=(this.m_BKImg.width-this.m_TipDlg.width)/2,n=(this.m_BKImg.height-this.m_TipDlg.height)/2;this.m_TipDlg.pos(i,n)},t.prototype.setCloseCB=function(t){this.m_CloseCB=t},t.prototype.size=function(t,e){this.width=t,this.height=e},t.prototype.showTip=function(t){this.m_TipDlg.showTip(t)},t.prototype.onTest=function(t){t.stopPropagation()},t.prototype.onTap=function(t){t.target!=this&&t.target!=this.m_closeBtn||(this.visible=!1,this.m_CloseCB&&this.m_CloseCB())},t.prototype.refresh=function(){this.m_ListPanel.refresh(),this.m_FavPanel.refresh()},t.prototype.popup=function(){this.visible=!0,this.refresh(),DDSDK.logTag("sdk-trydlg","popup","")},t}(d.Sprite);t.CTryDlg=i;var h=function(e){function t(){var t=e.call(this)||this;return t.init(),t.addEventListener(d.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return l(t,e),t.prototype.onAddAni=function(t){t.m_Ani.frameRate=t.dataSource.interval,t.m_Ani.gotoAndPlay(1,-1),t.addChild(t.m_Ani)},t.prototype.init=function(){if(this.m_AniAD=DDSDK_Render.getData("aniAD"),this.m_AniAD){var t=this.m_AniAD.list;if(t&&!(t.length<1)){this.m_AniList=[],this.m_Ani=null,"scale"in this.m_AniAD&&(this.scaleX=this.m_AniAD.scale.w,this.scaleY=this.m_AniAD.scale.h),"pos"in this.m_AniAD&&this.pos(this.m_AniAD.pos.x,this.m_AniAD.pos.y),"size"in this.m_AniAD&&(this.width=this.m_AniAD.size.w,this.height=this.m_AniAD.size.h);for(var e=null,i=0;i<t.length;i++){var n=t[i];((e=new d.Sprite).dataSource=n).atlas?this.loadAni(n.eskin,e,this,this.onAddAni):(e.m_Img=new d.Bitmap,e.addChild(e.m_Img),x(e.m_Img,n.skin)),e&&("pos"in n&&(e.x=n.pos.x,e.y=n.pos.y),"size"in n&&(e.width=n.size.w,e.height=n.size.h),"scale"in n&&(e.scaleX=n.scale.w,e.scaleY=n.scale.h),e.visible=!1,this.m_AniList.push(e),this.addChild(e))}this.m_Tween=null,this.m_Ani=null,this.m_CurAni=0,this.showAni(),this.touchEnabled=!0,this.addEventListener(d.TouchEvent.TOUCH_TAP,this.onTap,this)}}},t.prototype.onAddToStage=function(t){},t.prototype.loadAni=function(t,n,s,a){v(t,function(t,e){var i=new d.MovieClipDataFactory(t,e);n.m_Ani=new d.MovieClip(i.generateMovieClipData(n.dataSource.eskname)),a.call(s,n)})},t.prototype.showAni=function(){(this.m_Ani&&this.m_Ani.visible&&(this.m_Ani.visible=!1),this.m_CurAni>=this.m_AniList.length&&(this.m_CurAni=0),this.m_Ani=this.m_AniList[this.m_CurAni++],this.m_Ani.dataSource.atlas)||d.Tween.get(this.m_Ani).to({y:this.m_Ani.y+this.m_AniAD.tween.offsety1},this.m_AniAD.tween.time1,d.Ease.backInOut).to({y:this.m_Ani.y+this.m_AniAD.tween.offsety2},this.m_AniAD.tween.time2,d.Ease.backInOut);this.m_Ani.visible=!0,d.setTimeout(this.showAni,this,this.m_Ani.dataSource.time)},t.prototype.size=function(t,e){this.width=t,this.height=e},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.onTap=function(t){if("dataSource"in t.target.m_Ani){var e=t.target.m_Ani.dataSource;DDSDK.logTag("sdk-aniad",e.appid,e.path),DDSDK.openADApp(e)}},t}(d.Sprite);t.CAniAdView=h;var m=function(e){function t(){var t=e.call(this)||this;return t.btnGame=new d.Sprite,t.btnGame.anchorOffsetX=50,t.btnGame.anchorOffsetY=50,t.btnGame.x=50,t.btnGame.y=50,t.btnGame.width=100,t.btnGame.height=100,t.imgGameIcon=new d.Bitmap,t.imgGameIcon.width=t.imgGameIcon.height=100,t.imgMask=new d.Bitmap,t.imgMask.width=t.imgMask.height=100,t.imgRed=new d.Bitmap,t.imgRed.x=77,t.imgRed.y=-4,t.lbGameName=new d.TextField,t.lbGameName.text="这四个字",t.lbGameName.textColor="0xffffff",t.lbGameName.size=26,t.lbGameName.textAlign="center",t.lbGameName.y=108,t.lbGameName.width=4*this.lbGameName.size,t.btnGame.addChild(t.imgGameIcon),t.btnGame.addChild(t.imgMask),t.btnGame.addChild(t.imgRed),t.btnGame.addChild(t.lbGameName),t.addChild(t.btnGame),t.m_Data=null,t.imgMask.texture=T.getRes(c),t.imgRed.texture=T.getRes(u),t.imgGameIcon.mask=t.imgMask,t.width=t.height=100,t.touchEnabled=!0,t.imgMask.addEventListener(d.TouchEvent.TOUCH_TAP,t.onTouch,t),t.addEventListener(d.TouchEvent.TOUCH_TAP,t.onTouch,t),t}return l(t,e),t.prototype.setData=function(t){this.m_Data=t,x(this.imgGameIcon,t.skin),this.lbGameName.text=t.name,this.imgRed.visible=t.hot},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.onTouch=function(t){DDSDK.openADApp(this.m_Data)},t}(d.DisplayObjectContainer);t.CAppItem=m;var r=function(i){function t(t){var e=i.call(this)||this;return e.m_listObjs=[],e.m_Data=null,e.setType(t),e.m_Row=0,e.m_Col=0,e.m_CellNum=0,e}return l(t,i),t.prototype.setType=function(t){this.m_Type=t,this.m_Data=DDSDK.clone(DDSDK_Render.getData(t))},t.prototype.pos=function(t,e){this.x=t,this.y=e},t.prototype.size=function(t,e){this.width=t,this.height=e},t.prototype.setData=function(t){this.m_Data=t},t.prototype.setTextStyle=function(t,e,i,n){for(var s=0;s<this.m_listObjs.length;s++){var a=this.m_listObjs[s];a.lbGameName.size=e,a.lbGameName.bold=i,a.lbGameName.textColor=n,a.lbGameName.width=4*e+2}},t.prototype.nextData=function(){if(this.m_Data){for(var t=0;t<this.m_CellNum;t++){var e=this.m_Data.shift();this.m_Data.push(e)}this.refresh()}},t.prototype.refresh=function(){this.updateCell()},t.prototype.setViewGrid=function(t,e){this.m_Row=t,this.m_Col=e;var i,n,s,a=D+t*w,o=f+e*y;this.m_CellNum=(i=a,n=o,s=Math.trunc(n/y),Math.trunc(i/w)*s),this.setSize(a,o)},t.prototype.updateCell=function(){!function(t,e,i,n){if("undefined"==typeof DDSDK_Render)return;var s=n;if(void 0===s||null==s||s.length<1)return;var a=t.width,o=(t.height,D),h=f;e>s.length&&(e=s.length);if(e>i.length){var m=e-i.length;for(_=0;_<m;_++){var r=new T.CAppItem;r.visible=!1,t.addChild(r),i.push(r)}}for(var _=e;_<i.length;_++){var r=i;r.visible=!1}for(var _=0;_<e;_++){var r=i[_];r.setData(s[_]),r.visible=!0,r.pos(o,h),a<(o+=w)+w&&(o=D,h+=y)}}(this,this.m_CellNum,this.m_listObjs,this.m_Data)},t.prototype.setSize=function(t,e){this.size(t,e),this.updateCell()},t.prototype.complete=function(){},t}(d.DisplayObjectContainer);t.CListView=r;var _=function(n){function t(t,e){var i=n.call(this)||this;return i.m_BKImg=new d.Bitmap,i.m_Txt=new d.Bitmap,i.m_ListView=new r("favList"),i.m_ListView.setViewGrid(t,e),i.init(),i.addEventListener(d.TouchEvent.TOUCH_TAP,i.onTouch,i),i.addEventListener(d.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return l(t,n),t.prototype.onTouch=function(t){if(t.target&&t.target.m_Data){var e=t.target.m_Data;DDSDK.logTag("sdk-favor",e.appid,e.path)}},t.prototype.init=function(){this.m_BKImg.texture=T.getRes("xbqq_xk15"),this.m_BKImg.scale9Grid=new d.Rectangle(12,12,12,12),this.addChild(this.m_BKImg),this.m_Txt.texture=T.getRes("xbqq_xk17"),this.m_Txt.scaleX=1.2,this.m_Txt.scaleY=1.2,this.addChild(this.m_Txt),this.addChild(this.m_ListView),this.refresh(),this.refreshList()},t.prototype.refreshList=function(){this.m_ListView.nextData(),d.setTimeout(this.refreshList,this,DDSDK_Render.getData("FavRefreshTime"))},t.prototype.refresh=function(){var t=this.m_ListView.width+30,e=this.m_ListView.height;e<this.m_Txt.height&&(e=this.m_Txt.height),this.m_Txt.x=2,this.m_Txt.y=(e-this.m_Txt.height)/2-10,this.m_ListView.pos(this.m_Txt.x+30,2),this.m_BKImg.width=t,this.m_BKImg.height=e},t.prototype.onAddToStage=function(t){},t.prototype.pos=function(t,e){this.x=t,this.y=e},t}(d.Sprite);t.CFavorListView=_}(T),T.spriteSheet=null,T.getRes=function(t){return this.spriteSheet?this.spriteSheet.getTexture(t):null};var t={m_DDSdk:null,m_Data:null,m_TryBtn:null,m_TryDlg:null,m_FavAD:null,m_AniAD:null,m_bVisible:!0,m_ResLoadCallback:null,m_RewardCB:null,m_ResTime:(new Date).getTime(),init:function(t,e,i){this.m_DDSdk=t,this.filterData(e),this.setResLoadCallback(i),this.loadRes()},filterPltData:function(t,e,i){var n,s,a,o=[];for(n=0;n<t[e].length;n++)a=!0,"showmode"in(s=t[e][n])&&(i?2==s.showmode&&(a=!1):1==s.showmode&&(a=!1)),a&&o.push(s);t[e]=o},filterData:function(t){var e=!1;"wx"in window&&("ios"==wx.getSystemInfoSync().platform&&(e=!0));this.filterPltData(t,"appList",e),this.filterPltData(t,"favList",e),"aniAD"in t&&t.aniAD.list&&this.filterPltData(t.aniAD,"list",e),this.m_Data=t},setResLoadCallback:function(t){this.m_ResLoadCallback=t},loadRes:function(){var t,h,m,e=this.m_Data.try_url_egret;RES.destroyRes(e),t=e,h=this.onLoadedComplete,m=this,v(t,function(t,e){var i=t.frames;for(var n in T.spriteSheet=new d.SpriteSheet(e),i){var s=i[n],a=T.spriteSheet.createTexture(n,s.x,s.y,s.w,s.h,s.offX,s.offY,s.sourceW,s.sourceH);if(s.scale9grid){var o=s.scale9grid.split(",");a.scale9Grid=new d.Rectangle(parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}}h.call(m)})},onLoadedComplete:function(){this.m_ResLoadCallback&&this.m_ResLoadCallback()},clearRewardCB:function(){this.m_RewardCB=null},setRewardCB:function(t){this.m_RewardCB=t},wxShow:function(t){this.m_RewardCB&&this.m_RewardCB(t)},setData:function(t,e){this.m_Data[t]=e},getData:function(t){return this.m_Data[t]},isShow:function(t){return!this.getData("show").hideAll&&this.getData("show")[t]},getTryDlg:function(){return this.isShow("tryDlg")?(this.m_TryDlg||(this.m_TryDlg=new T.CTryDlg),this.m_TryDlg):null},getTryBtn:function(){return this.isShow("tryDlg")?(this.m_TryBtn||(this.m_TryBtn=new T.CTryBtn),this.m_TryBtn):null},createListView:function(t){return new T.CListView(t)},getFavAD:function(t,e){return this.isShow("adFav")?(this.m_FavAD||(this.m_FavAD=new T.CFavorListView(t,e)),this.m_FavAD):null},getAniAD:function(){if(!this.isShow("adAni"))return null;var t=this.getData("aniAD");return t&&t.list&&0<t.list.length?(this.m_AniAD||(this.m_AniAD=new T.CAniAdView),this.m_AniAD):null}};window.EGRET_RENDER=t,window.DDSDK_Render=t}();