var egret = window.egret;!function(){var e={m_Ver:"0.0.1 beta",m_LogServer:"https://stat.chiji-h5.com/statwx_common.php",m_JsonUrl:"https://jsonconfig.chiji-h5.com/json/",m_Appid:"",m_Openid:"",m_Config:"",m_bLog:!0,m_bPub:!0,m_Data:null,m_ShareCB:null,m_OpenAppCB:null,m_RewardCB:null,m_Render:null,m_ShareCBTime:3e3,m_OpenAppCBTime:3e3,init:function(e,t,n){this.m_Appid=e,this.m_Openid=t,this.m_bPub&&(this.m_JsonUrl=this.m_JsonUrl+n+"/"+e+".json"),this.m_ResTime=(new Date).getTime(),this.m_LoadCompleteCallback=null,"undefined"==typeof render?"undefined"==typeof DDSDK_Render?render=null:this.m_Render=DDSDK_Render:this.m_Render=render,this.m_JsonUrl=this.m_JsonUrl+"?"+this.m_ResTime,this.loadRes()},initRender:function(){var e=this;this.m_Render&&this.m_Config?(this.m_Data=this.m_Config,this.m_Config.shareCBTime&&(this.m_ShareCBTime=this.m_Config.shareCBTime),this.m_Config.openAppCBTime&&(this.m_OpenAppCBTime=this.m_Config.openAppCBTime),this.m_Config.logServer&&(this.m_LogServer=this.m_Config.logServer),this.m_Render.init(this,this.m_Data,function(){e.m_LoadCompleteCallback&&e.m_LoadCompleteCallback()})):this.m_Render||e.m_LoadCompleteCallback()},getRender:function(){return this.m_Render},openApp:function(e){this.openADApp(e)},setResLoadCallback:function(e){this.m_LoadCompleteCallback=e},setRewardCB:function(e){this.m_RewardCB=e},setOpenAppCB:function(e){this.m_OpenAppCB=e},setShareCB:function(e){this.m_ShareCB=e},checkReward:function(e,n,i,t,r){if(DDSDK_Render){var a=(new Date).getTime(),o=a-r;if(t<o)return DDSDK.ajax(e,n,function(e){if(e&&0==e.ret){DDSDK.giveReward(i),DDSDK_Render.getTryDlg().refresh();var t=DDSDK_Render.getData("try_rewardtip");t=t.replace(/money/,i),DDSDK_Render.getTryDlg().showTip(t),DDSDK.logTag("sdk-givereward",n.gameid,i)}},function(e){}),!0;var s=DDSDK_Render.getData("try_rewardfailtip");return DDSDK_Render.getTryDlg().showTip(s),!1}},giveReward:function(e){this.m_RewardCB&&this.m_RewardCB(e)},loadRes:function(){var t=this;r(this.m_JsonUrl,null,function(e){t.m_Config=e,t.initRender()},function(e){t.loadRes()})},openADApp:function(e,t){this.logTag("sdk-openapp",e.appid,e.path+"&"+e.extraData);var n=this;function i(){n.m_OpenAppCB(e)}if(DDSDK_Render&&DDSDK_Render.clearRewardCB(),"wx"in window)try{wx.navigateToMiniProgram({appId:e.appid,path:e.path,extraData:e.extraData,success:function(e){t&&t(),n.m_OpenAppCB&&setTimeout(i,n.m_OpenAppCBTime)}})}catch(e){}},openOtherApp:function(e,t,n){if("undefined"!=typeof wx)try{this.logTag("login","openGameBox",""),wx.navigateToMiniProgram({appId:"wxd84c4af1e5b98fbe"})}catch(e){}},logEnable:function(e){this.m_bLog=e},logTag:function(e,t,n){if(this.m_bLog){var i={appid:this.m_Appid,openid:this.m_Openid,page:e,event:t,extra:n};r(this.m_LogServer,i,function(e){},function(e){})}}};function r(e,t,i,n){var r=null;if(t)for(var a in r="",t)r+="&"+a+"="+t[a];if("Laya"in window){var o="post";t||(o="get");var s=new Laya.HttpRequest,p=e;s.send(p,r,o,"text"),s.once(Laya.Event.COMPLETE,this,function(e){var t=s.data;try{t=JSON.parse(t)}catch(e){t=s.data}i(t)}),s.once(Laya.Event.ERROR,this,function(e){n(e)})}else if("egret"in window){o=egret.HttpMethod.POST;t||(o=egret.HttpMethod.GET);var m=new egret.HttpRequest;m.responseType=egret.HttpResponseType.TEXT,m.open(e,o),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.send(r),m.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget,n=t.response;try{n=JSON.parse(n)}catch(e){n=t.response}i(n)},this),m.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(e)},this)}}e.clone=function e(t){var n;if("object"==typeof t)if(null===t)n=null;else if(t instanceof Array){n=[];for(var i=0,r=t.length;i<r;i++)n.push(e(t[i]))}else for(var a in n={},t)n[a]=e(t[a]);else n=t;return n},e.ajax=r,window.DDSDK=e}();